import time
import unittest
import copy

from lxml import etree
from crdesigner.map_conversion.opendrive.cr_to_opendrive.elements.junction import Junction
from crdesigner.map_conversion.opendrive.cr_to_opendrive.elements.road import Road
import crdesigner.map_conversion.opendrive.cr_to_opendrive.utils.file_writer as fwr
from tests.map_conversion.conversion_base_test import ConversionBaseTestCases

class TestJunction(ConversionBaseTestCases.ConversionBaseTest):
    road_counting = 20

    def setUp(self):
        Road.counting = 20
        Road.cr_id_to_od = {}
        Road.lane_to_lane = {}
        Road.lane_2_lane_link = {}
        Road.link_map = {}

    def test_convert_init_junction(self):
        # Given
        # Initialization requires convertion, as it is the easiest way to create all needed elements
        #TODO issue 432: Initialize all elements manually
        Road.counting = 20
        self.prepare_conversion("ZAM_Threewayintersection-1_1_T-1")
        self.prepare_junctions()

        intersection = self.converter.lane_net.intersections[0]

        root = etree.Element("OpenDRIVE")

        #When
        junction = Junction(
                intersection.incomings,
                Road.cr_id_to_od,
                Road.lane_to_lane,
                self.converter.writer.root,
                self.converter.scenario.lanelet_network,
                intersection.intersection_id,
        )

        #Then
        self.assertEqual(intersection.incomings, junction.incoming)
        self.assertEqual(root.tag, junction.root.tag)
        self.assertEqual(16, junction.id)
        self.assertEqual("junction", junction.junction.tag)
        self.assertEqual("", junction.junction.get("name"))
        self.assertEqual(str.format("{}", 16), junction.junction.get("id"))
        self.assertEqual("default", junction.junction.get("type"))
        self.assertEqual([], junction.ending_list)

        # Junction.junction check
        self.checkJunctionJunction(junction)

        # Junction.root check
        self.checkJunctionRoot0(junction)
        self.checkJunctionRoot1(junction)
        self.checkJunctionRoot2(junction)
        self.checkJunctionRoot3(junction)
        self.checkJunctionRoot4(junction)
        self.checkJunctionRoot5(junction)
        self.checkJunctionRoot6(junction)
        self.checkJunctionRoot7(junction)

    def prepare_junctions(self):
        self.converter.writer = fwr.Writer("ZAM_Threewayintersection-1_1_T-1-test.xml")
        lane_list = self.converter.lane_net.lanelets
        lanelet = copy.deepcopy(lane_list[0])
        self.converter.construct_roads([lanelet.lanelet_id])
        self.converter.check_all_visited()
        self.converter.process_link_map(Road.link_map, Road.lane_2_lane_link)
        self.converter.create_linkages(Road.link_map, Road.lane_2_lane_link)

    def checkJunctionRoot7(self, junction):
        self.assertEqual("junction", junction.root[7].tag)
        self.assertEqual("", junction.root[7].get("name"))
        self.assertEqual("16", junction.root[7].get("id"))
        self.assertEqual("default", junction.root[7].get("type"))
        self.assertEqual("connection", junction.root[7][0].tag)
        self.assertEqual('1', junction.root[7][0].get("id"))
        self.assertEqual("21", junction.root[7][0].get("incomingRoad"))
        self.assertEqual("25", junction.root[7][0].get("connectingRoad"))
        self.assertEqual("start", junction.root[7][0].get("contactPoint"))
        self.assertEqual("laneLink", junction.root[7][0][0].tag)
        self.assertEqual("-1", junction.root[7][0][0].get("from"))
        self.assertEqual("-1", junction.root[7][0][0].get("to"))
        self.assertEqual("connection", junction.root[7][1].tag)
        self.assertEqual("2", junction.root[7][1].get("id"))
        self.assertEqual("21", junction.root[7][1].get("incomingRoad"))
        self.assertEqual("22", junction.root[7][1].get("connectingRoad"))
        self.assertEqual("start", junction.root[7][1].get("contactPoint"))
        self.assertEqual("laneLink", junction.root[7][1][0].tag)
        self.assertEqual("-1", junction.root[7][1][0].get("from"))
        self.assertEqual("1", junction.root[7][1][0].get("to"))
        self.assertEqual("connection", junction.root[7][2].tag)
        self.assertEqual("3", junction.root[7][2].get("id"))
        self.assertEqual("26", junction.root[7][2].get("incomingRoad"))
        self.assertEqual("24", junction.root[7][2].get("connectingRoad"))
        self.assertEqual("start", junction.root[7][2].get("contactPoint"))
        self.assertEqual("laneLink", junction.root[7][2][0].tag)
        self.assertEqual("1", junction.root[7][2][0].get("from"))
        self.assertEqual("1", junction.root[7][2][0].get("to"))
        self.assertEqual("connection", junction.root[7][3].tag)
        self.assertEqual("4", junction.root[7][3].get("id"))
        self.assertEqual("26", junction.root[7][3].get("incomingRoad"))
        self.assertEqual("25", junction.root[7][3].get("connectingRoad"))
        self.assertEqual("start", junction.root[7][3].get("contactPoint"))
        self.assertEqual("laneLink", junction.root[7][3][0].tag)
        self.assertEqual("1", junction.root[7][3][0].get("from"))
        self.assertEqual("1", junction.root[7][3][0].get("to"))
        self.assertEqual("connection", junction.root[7][4].tag)
        self.assertEqual("5", junction.root[7][4].get("id"))
        self.assertEqual("23", junction.root[7][4].get("incomingRoad"))
        self.assertEqual("24", junction.root[7][4].get("connectingRoad"))
        self.assertEqual("start", junction.root[7][4].get("contactPoint"))
        self.assertEqual("laneLink", junction.root[7][4][0].tag)
        self.assertEqual("1", junction.root[7][4][0].get("from"))
        self.assertEqual("-1", junction.root[7][4][0].get("to"))
        self.assertEqual("connection", junction.root[7][5].tag)
        self.assertEqual("6", junction.root[7][5].get("id"))
        self.assertEqual("23", junction.root[7][5].get("incomingRoad"))
        self.assertEqual("22", junction.root[7][5].get("connectingRoad"))
        self.assertEqual("start", junction.root[7][5].get("contactPoint"))
        self.assertEqual("laneLink", junction.root[7][5][0].tag)
        self.assertEqual("1", junction.root[7][5][0].get("from"))
        self.assertEqual("-1", junction.root[7][5][0].get("to"))

    def checkJunctionRoot0(self, junction):
        self.assertEqual(8, len(junction.root))
        self.assertEqual("header", junction.root[0].tag)
        self.assertEqual("1", junction.root[0].get("revMajor"))
        self.assertEqual("6", junction.root[0].get("revMinor"))
        self.assertEqual("1.0", junction.root[0].get("version"))
        self.assertEqual("ZAM_Threewayintersection-1_1_T-1-test", junction.root[0].get("name"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[0].get("north"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[0].get("south"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[0].get("east"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[0].get("west"))
        self.assertEqual("geoReference", junction.root[0][0].tag)
        self.assertEqual("TODO", junction.root[0][0][0].tag)

    def checkJunctionRoot1(self, junction):
        self.assertEqual("road", junction.root[1].tag)
        self.assertEqual("", junction.root[1].get("name"))
        self.assertEqual(str.format("{0:.16e}", 20), junction.root[1].get("length"))
        self.assertEqual("21", junction.root[1].get("id"))
        self.assertEqual("-1", junction.root[1].get("junction"))
        self.assertEqual("link", junction.root[1][0].tag)
        self.assertEqual("type", junction.root[1][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][1].get("s"))
        self.assertEqual("town", junction.root[1][1].get("type"))
        self.assertEqual("planView", junction.root[1][2].tag)
        self.assertEqual("elevationProfile", junction.root[1][3].tag)
        self.assertEqual("lateralProfile", junction.root[1][4].tag)
        self.assertEqual("lanes", junction.root[1][5].tag)
        self.assertEqual("laneSection", junction.root[1][5][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0].get("s"))
        self.assertEqual("center", junction.root[1][5][0][0].tag)
        self.assertEqual("lane", junction.root[1][5][0][0][0].tag)
        self.assertEqual("0", junction.root[1][5][0][0][0].get("id"))
        self.assertEqual("driving", junction.root[1][5][0][0][0].get("type"))
        self.assertEqual("false", junction.root[1][5][0][0][0].get("level"))
        self.assertEqual("link", junction.root[1][5][0][0][0][0].tag)
        self.assertEqual("roadMark", junction.root[1][5][0][0][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][0][0][1].get("sOffset"))
        self.assertEqual("solid", junction.root[1][5][0][0][0][1].get("type"))
        self.assertEqual("standard", junction.root[1][5][0][0][0][1].get("weight"))
        self.assertEqual("standard", junction.root[1][5][0][0][0][1].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[1][5][0][0][0][1].get("width"))
        self.assertEqual("left", junction.root[1][5][0][1].tag)
        self.assertEqual("lane", junction.root[1][5][0][1][0].tag)
        self.assertEqual('1', junction.root[1][5][0][1][0].get("id"))
        self.assertEqual("driving", junction.root[1][5][0][1][0].get("type"))
        self.assertEqual("false", junction.root[1][5][0][1][0].get("level"))
        self.assertEqual("link", junction.root[1][5][0][1][0][0].tag)
        self.assertEqual("width", junction.root[1][5][0][1][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][1][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[1][5][0][1][0][1].get("a"))
        self.assertEqual("-1.5700924586837747e-17", junction.root[1][5][0][1][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][1][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][1][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[1][5][0][1][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][1][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[1][5][0][1][0][2].get("type"))
        self.assertEqual("standard", junction.root[1][5][0][1][0][2].get("weight"))
        self.assertEqual("standard", junction.root[1][5][0][1][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[1][5][0][1][0][2].get("width"))
        self.assertEqual("right", junction.root[1][5][0][2].tag)
        self.assertEqual("lane", junction.root[1][5][0][2][0].tag)
        self.assertEqual('-1', junction.root[1][5][0][2][0].get("id"))
        self.assertEqual("driving", junction.root[1][5][0][2][0].get("type"))
        self.assertEqual("false", junction.root[1][5][0][2][0].get("level"))
        self.assertEqual("link", junction.root[1][5][0][2][0][0].tag)
        self.assertEqual("width", junction.root[1][5][0][2][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][2][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[1][5][0][2][0][1].get("a"))
        self.assertEqual("-1.5700924586837750e-17", junction.root[1][5][0][2][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][2][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][2][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[1][5][0][2][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[1][5][0][2][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[1][5][0][2][0][2].get("type"))
        self.assertEqual("standard", junction.root[1][5][0][2][0][2].get("weight"))
        self.assertEqual("standard", junction.root[1][5][0][2][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[1][5][0][1][0][2].get("width"))
        self.assertEqual("objects", junction.root[1][6].tag)
        self.assertEqual("signals", junction.root[1][7].tag)

    def checkJunctionRoot2(self, junction):
        self.assertEqual("road", junction.root[2].tag)
        self.assertEqual("", junction.root[2].get("name"))
        self.assertEqual("7.8372339517747136e+00", junction.root[2].get("length"))
        self.assertEqual("22", junction.root[2].get("id"))
        self.assertEqual("16", junction.root[2].get("junction"))
        self.assertEqual("link", junction.root[2][0].tag)
        self.assertEqual("type", junction.root[2][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][1].get("s"))
        self.assertEqual("town", junction.root[2][1].get("type"))
        self.assertEqual("planView", junction.root[2][2].tag)
        self.assertEqual("geometry", junction.root[2][2][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][2][0].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[2][2][0].get("x"))
        self.assertEqual("-3.5000000000000000e+00", junction.root[2][2][0].get("y"))
        self.assertEqual("1.6749660721724917e+00", junction.root[2][2][0].get("hdg"))
        self.assertEqual("9.9819482603162135e-01", junction.root[2][2][0].get("length"))
        self.assertEqual("spiral", junction.root[2][2][0][0].tag)
        self.assertEqual("9.6613425352009230e-02", junction.root[2][2][0][0].get("curvStart"))
        self.assertEqual("1.4818066253010340e-01", junction.root[2][2][0][0].get("curvEnd"))
        self.assertEqual("geometry", junction.root[2][2][1].tag)
        self.assertEqual("9.9819482603162135e-01", junction.root[2][2][1].get("s"))
        self.assertEqual("2.4896206253854501e+01", junction.root[2][2][1].get("x"))
        self.assertEqual("-2.5072161519356881e+00", junction.root[2][2][1].get("y"))
        self.assertEqual("1.8690916323796183e+00", junction.root[2][2][1].get("hdg"))
        self.assertEqual("9.9803674030080702e-01", junction.root[2][2][1].get("length"))
        self.assertEqual("spiral", junction.root[2][2][1][0].tag)
        self.assertEqual("1.4818066253010340e-01", junction.root[2][2][1][0].get("curvStart"))
        self.assertEqual("1.9997720530768345e-01", junction.root[2][2][1][0].get("curvEnd"))
        self.assertEqual("geometry", junction.root[2][2][2].tag)
        self.assertEqual("1.9962315663324284e+00", junction.root[2][2][2].get("s"))
        self.assertEqual("2.4602892017361071e+01", junction.root[2][2][2].get("x"))
        self.assertEqual("-1.5532538394408304e+00", junction.root[2][2][2].get("y"))
        self.assertEqual("2.0718535741262176e+00", junction.root[2][2][2].get("hdg"))
        self.assertEqual("9.9797465125136897e-01", junction.root[2][2][2].get("length"))
        self.assertEqual("arc", junction.root[2][2][2][0].tag)
        self.assertEqual("1.9997720530768345e-01", junction.root[2][2][2][0].get("curvature"))
        self.assertEqual("geometry", junction.root[2][2][3].tag)
        self.assertEqual("2.9942062175837973e+00", junction.root[2][2][3].get("s"))
        self.assertEqual("2.4123511807586731e+01", junction.root[2][2][3].get("x"))
        self.assertEqual("-6.7795502245488193e-01", junction.root[2][2][3].get("y"))
        self.assertEqual("2.2714414399354665e+00", junction.root[2][2][3].get("hdg"))
        self.assertEqual("9.9799364319587047e-01", junction.root[2][2][3].get("length"))
        self.assertEqual("arc", junction.root[2][2][3][0].tag)
        self.assertEqual("1.9992399735099053e-01", junction.root[2][2][3][0].get("curvature"))
        self.assertEqual("geometry", junction.root[2][2][4].tag)
        self.assertEqual("3.9921998607796678e+00", junction.root[2][2][4].get("s"))
        self.assertEqual("2.3480094364917232e+01", junction.root[2][2][4].get("x"))
        self.assertEqual("8.4937700231609806e-02", junction.root[2][2][4].get("y"))
        self.assertEqual("2.4689226485277511e+00", junction.root[2][2][4].get("hdg"))
        self.assertEqual("9.9802816011502449e-01", junction.root[2][2][4].get("length"))
        self.assertEqual("arc", junction.root[2][2][4][0].tag)
        self.assertEqual("1.9987527769085611e-01", junction.root[2][2][4][0].get("curvature"))
        self.assertEqual("geometry", junction.root[2][2][5].tag)
        self.assertEqual("4.9902280208946923e+00", junction.root[2][2][5].get("s"))
        self.assertEqual("2.2699475822634565e+01", junction.root[2][2][5].get("x"))
        self.assertEqual("7.0678567186701236e-01", junction.root[2][2][5].get("y"))
        self.assertEqual("2.6738924224341813e+00", junction.root[2][2][5].get("hdg"))
        self.assertEqual("9.9808144180144964e-01", junction.root[2][2][5].get("length"))
        self.assertEqual("spiral", junction.root[2][2][5][0].tag)
        self.assertEqual("2.0053176369749057e-01", junction.root[2][2][5][0].get("curvStart"))
        self.assertEqual("geometry", junction.root[2][2][6].tag)
        self.assertEqual("5.9883094626961419e+00", junction.root[2][2][6].get("s"))
        self.assertEqual("2.1808580878678114e+01", junction.root[2][2][6].get("x"))
        self.assertEqual("1.1567554078507727e+00", junction.root[2][2][6].get("y"))
        self.assertEqual("2.8678175389864404e+00", junction.root[2][2][6].get("hdg"))
        self.assertEqual("9.9811685972454089e-01", junction.root[2][2][6].get("length"))
        self.assertEqual("spiral", junction.root[2][2][6][0].tag)
        self.assertEqual("1.8460836337615408e-01", junction.root[2][2][6][0].get("curvStart"))
        self.assertEqual("1.5752388049531971e-01", junction.root[2][2][6][0].get("curvEnd"))
        self.assertEqual("geometry", junction.root[2][2][7].tag)
        self.assertEqual("6.9864263224206828e+00", junction.root[2][2][7].get("s"))
        self.assertEqual("2.0847636795890530e+01", junction.root[2][2][7].get("x"))
        self.assertEqual("1.4266141401940253e+00", junction.root[2][2][7].get("y"))
        self.assertEqual("3.0552309903253723e+00", junction.root[2][2][7].get("hdg"))
        self.assertEqual("8.5080762935403076e-01", junction.root[2][2][7].get("length"))
        self.assertEqual("spiral", junction.root[2][2][7][0].tag)
        self.assertEqual("1.5752388049531971e-01", junction.root[2][2][7][0].get("curvStart"))
        self.assertEqual("1.2845294758092096e-01", junction.root[2][2][7][0].get("curvEnd"))
        self.assertEqual("elevationProfile", junction.root[2][3].tag)
        self.assertEqual("lateralProfile", junction.root[2][4].tag)
        self.assertEqual("lanes", junction.root[2][5].tag)
        self.assertEqual("laneSection", junction.root[2][5][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0].get("s"))
        self.assertEqual("center", junction.root[2][5][0][0].tag)
        self.assertEqual("lane", junction.root[2][5][0][0][0].tag)
        self.assertEqual("0", junction.root[2][5][0][0][0].get("id"))
        self.assertEqual("driving", junction.root[2][5][0][0][0].get("type"))
        self.assertEqual("false", junction.root[2][5][0][0][0].get("level"))
        self.assertEqual("link", junction.root[2][5][0][0][0][0].tag)
        self.assertEqual("roadMark", junction.root[2][5][0][0][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][0][0][1].get("sOffset"))
        self.assertEqual("solid", junction.root[2][5][0][0][0][1].get("type"))
        self.assertEqual("standard", junction.root[2][5][0][0][0][1].get("weight"))
        self.assertEqual("standard", junction.root[2][5][0][0][0][1].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[2][5][0][0][0][1].get("width"))
        self.assertEqual("left", junction.root[2][5][0][1].tag)
        self.assertEqual("lane", junction.root[2][5][0][1][0].tag)
        self.assertEqual("1", junction.root[2][5][0][1][0].get("id"))
        self.assertEqual("driving", junction.root[2][5][0][1][0].get("type"))
        self.assertEqual("false", junction.root[2][5][0][1][0].get("level"))
        self.assertEqual("link", junction.root[2][5][0][1][0][0].tag)
        self.assertEqual("width", junction.root[2][5][0][1][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][1][0][1].get("sOffset"))
        self.assertEqual("2.9999000016667212e+00", junction.root[2][5][0][1][0][1].get("a"))
        self.assertEqual("1.8194390151268435e-05", junction.root[2][5][0][1][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][1][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][1][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[2][5][0][1][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][1][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[2][5][0][1][0][2].get("type"))
        self.assertEqual("standard", junction.root[2][5][0][1][0][2].get("weight"))
        self.assertEqual("standard", junction.root[2][5][0][1][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[2][5][0][1][0][2].get("width"))
        self.assertEqual("right", junction.root[2][5][0][2].tag)
        self.assertEqual("lane", junction.root[2][5][0][2][0].tag)
        self.assertEqual("-1", junction.root[2][5][0][2][0].get("id"))
        self.assertEqual("driving", junction.root[2][5][0][2][0].get("type"))
        self.assertEqual("false", junction.root[2][5][0][2][0].get("level"))
        self.assertEqual("link", junction.root[2][5][0][2][0][0].tag)
        self.assertEqual("successor", junction.root[2][5][0][2][0][0][0].tag)
        self.assertEqual('1', junction.root[2][5][0][2][0][0][0].get("id"))
        self.assertEqual("predecessor", junction.root[2][5][0][2][0][0][1].tag)
        self.assertEqual('1', junction.root[2][5][0][2][0][0][1].get("id"))
        self.assertEqual("width", junction.root[2][5][0][2][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][2][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[2][5][0][2][0][1].get("a"))
        self.assertEqual("-3.0764427084074053e-17", junction.root[2][5][0][2][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][2][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][2][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[2][5][0][2][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[2][5][0][2][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[2][5][0][2][0][2].get("type"))
        self.assertEqual("standard", junction.root[2][5][0][2][0][2].get("weight"))
        self.assertEqual("standard", junction.root[2][5][0][2][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[2][5][0][1][0][2].get("width"))
        self.assertEqual("objects", junction.root[2][6].tag)
        self.assertEqual("signals", junction.root[2][7].tag)

    def checkJunctionRoot3(self, junction):
        self.assertEqual("road", junction.root[3].tag)
        self.assertEqual("", junction.root[3].get("name"))
        self.assertEqual("2.0000000002049873e+01", junction.root[3].get("length"))
        self.assertEqual("23", junction.root[3].get("id"))
        self.assertEqual("-1", junction.root[3].get("junction"))
        self.assertEqual("link", junction.root[3][0].tag)
        self.assertEqual("type", junction.root[3][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][1].get("s"))
        self.assertEqual("town", junction.root[3][1].get("type"))
        self.assertEqual("planView", junction.root[3][2].tag)
        self.assertEqual("geometry", junction.root[3][2][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][2][0].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][0].get("x"))
        self.assertEqual("-3.5000000000000000e+00", junction.root[3][2][0].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][0].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][0].get("length"))
        self.assertEqual("geometry", junction.root[3][2][1].tag)
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][1].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][1].get("x"))
        self.assertEqual("-4.5000000000000000e+00", junction.root[3][2][1].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][1].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][1].get("length"))
        self.assertEqual("geometry", junction.root[3][2][2].tag)
        self.assertEqual("2.0000000000000000e+00", junction.root[3][2][2].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][2].get("x"))
        self.assertEqual("-5.5000000000000000e+00", junction.root[3][2][2].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][2].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][2].get("length"))
        self.assertEqual("geometry", junction.root[3][2][3].tag)
        self.assertEqual("3.0000000000000000e+00", junction.root[3][2][3].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][3].get("x"))
        self.assertEqual("-6.5000000000000000e+00", junction.root[3][2][3].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][3].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][3].get("length"))
        self.assertEqual("geometry", junction.root[3][2][4].tag)
        self.assertEqual("4.0000000000000000e+00", junction.root[3][2][4].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][4].get("x"))
        self.assertEqual("-7.5000000000000000e+00", junction.root[3][2][4].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][4].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][4].get("length"))
        self.assertEqual("geometry", junction.root[3][2][5].tag)
        self.assertEqual("5.0000000000000000e+00", junction.root[3][2][5].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][5].get("x"))
        self.assertEqual("-8.5000000000000000e+00", junction.root[3][2][5].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][5].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][5].get("length"))
        self.assertEqual("geometry", junction.root[3][2][6].tag)
        self.assertEqual("6.0000000000000000e+00", junction.root[3][2][6].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][6].get("x"))
        self.assertEqual("-9.5000000000000000e+00", junction.root[3][2][6].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][6].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][6].get("length"))
        self.assertEqual("geometry", junction.root[3][2][7].tag)
        self.assertEqual("7.0000000000000000e+00", junction.root[3][2][7].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][7].get("x"))
        self.assertEqual("-1.0500000000000000e+01", junction.root[3][2][7].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][7].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][7].get("length"))
        self.assertEqual("geometry", junction.root[3][2][8].tag)
        self.assertEqual("8.0000000000000000e+00", junction.root[3][2][8].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[3][2][8].get("x"))
        self.assertEqual("-1.1500000000000000e+01", junction.root[3][2][8].get("y"))
        self.assertEqual("-1.5708013306197575e+00", junction.root[3][2][8].get("hdg"))
        self.assertEqual("9.9999999989993782e-01", junction.root[3][2][8].get("length"))
        self.assertEqual("geometry", junction.root[3][2][9].tag)
        self.assertEqual("8.9999999998999378e+00", junction.root[3][2][9].get("s"))
        self.assertEqual("2.4999994996175140e+01", junction.root[3][2][9].get("x"))
        self.assertEqual("-1.2499999999887418e+01", junction.root[3][2][9].get("y"))
        self.assertEqual("-1.5708413252199229e+00", junction.root[3][2][9].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][9].get("length"))
        self.assertEqual("geometry", junction.root[3][2][10].tag)
        self.assertEqual("9.9999999998999378e+00", junction.root[3][2][10].get("s"))
        self.assertEqual("2.4999949997750129e+01", junction.root[3][2][10].get("x"))
        self.assertEqual("-1.3499999998874989e+01", junction.root[3][2][10].get("y"))
        self.assertEqual("-1.5708413252199194e+00", junction.root[3][2][10].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][10].get("length"))
        self.assertEqual("geometry", junction.root[3][2][11].tag)
        self.assertEqual("1.0999999999899938e+01", junction.root[3][2][11].get("s"))
        self.assertEqual("2.4999904999325121e+01", junction.root[3][2][11].get("x"))
        self.assertEqual("-1.4499999997862560e+01", junction.root[3][2][11].get("y"))
        self.assertEqual("-1.5708013261200182e+00", junction.root[3][2][11].get("hdg"))
        self.assertEqual("9.9999999990001598e-01", junction.root[3][2][11].get("length"))
        self.assertEqual("arc", junction.root[3][2][11][0].tag)
        self.assertEqual("2.1249381240322324e-05", junction.root[3][2][11][0].get("curvature"))
        self.assertEqual("geometry", junction.root[3][2][12].tag)
        self.assertEqual("1.1999999999799954e+01", junction.root[3][2][12].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][12].get("x"))
        self.assertEqual("-1.5499999997750079e+01", junction.root[3][2][12].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][12].get("hdg"))
        self.assertEqual("1.0000000000000018e+00", junction.root[3][2][12].get("length"))
        self.assertEqual("arc", junction.root[3][2][12][0].tag)
        self.assertEqual("1.2499437534112541e-05", junction.root[3][2][12][0].get("curvature"))
        self.assertEqual("geometry", junction.root[3][2][13].tag)
        self.assertEqual("1.2999999999799956e+01", junction.root[3][2][13].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][13].get("x"))
        self.assertEqual("-1.6499999997750081e+01", junction.root[3][2][13].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][13].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][13].get("length"))
        self.assertEqual("geometry", junction.root[3][2][14].tag)
        self.assertEqual("1.3999999999799956e+01", junction.root[3][2][14].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][14].get("x"))
        self.assertEqual("-1.7499999997750081e+01", junction.root[3][2][14].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][14].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][14].get("length"))
        self.assertEqual("geometry", junction.root[3][2][15].tag)
        self.assertEqual("1.4999999999799956e+01", junction.root[3][2][15].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][15].get("x"))
        self.assertEqual("-1.8499999997750081e+01", junction.root[3][2][15].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][15].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][15].get("length"))
        self.assertEqual("geometry", junction.root[3][2][16].tag)
        self.assertEqual("1.5999999999799956e+01", junction.root[3][2][16].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][16].get("x"))
        self.assertEqual("-1.9499999997750081e+01", junction.root[3][2][16].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][16].get("hdg"))
        self.assertEqual("9.9999999999999822e-01", junction.root[3][2][16].get("length"))
        self.assertEqual("geometry", junction.root[3][2][17].tag)
        self.assertEqual("1.6999999999799954e+01", junction.root[3][2][17].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][17].get("x"))
        self.assertEqual("-2.0499999997750081e+01", junction.root[3][2][17].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][17].get("hdg"))
        self.assertEqual("9.9999999999999645e-01", junction.root[3][2][17].get("length"))
        self.assertEqual("geometry", junction.root[3][2][18].tag)
        self.assertEqual("1.7999999999799950e+01", junction.root[3][2][18].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][18].get("x"))
        self.assertEqual("-2.1499999997750077e+01", junction.root[3][2][18].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][18].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][18].get("length"))
        self.assertEqual("geometry", junction.root[3][2][19].tag)
        self.assertEqual("1.8999999999799950e+01", junction.root[3][2][19].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][19].get("x"))
        self.assertEqual("-2.2499999997750077e+01", junction.root[3][2][19].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][19].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[3][2][19].get("length"))
        self.assertEqual("geometry", junction.root[3][2][20].tag)
        self.assertEqual("1.9999999999799950e+01", junction.root[3][2][20].get("s"))
        self.assertEqual("2.4999900000000000e+01", junction.root[3][2][20].get("x"))
        self.assertEqual("-2.3499999997750077e+01", junction.root[3][2][20].get("y"))
        self.assertEqual("-1.5707963267948966e+00", junction.root[3][2][20].get("hdg"))
        self.assertEqual("2.2499229146433208e-09", junction.root[3][2][20].get("length"))
        self.assertEqual("elevationProfile", junction.root[3][3].tag)
        self.assertEqual("lateralProfile", junction.root[3][4].tag)
        self.assertEqual("lanes", junction.root[3][5].tag)
        self.assertEqual("laneSection", junction.root[3][5][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0].get("s"))
        self.assertEqual("center", junction.root[3][5][0][0].tag)
        self.assertEqual("lane", junction.root[3][5][0][0][0].tag)
        self.assertEqual("0", junction.root[3][5][0][0][0].get("id"))
        self.assertEqual("driving", junction.root[3][5][0][0][0].get("type"))
        self.assertEqual("false", junction.root[3][5][0][0][0].get("level"))
        self.assertEqual("link", junction.root[3][5][0][0][0][0].tag)
        self.assertEqual("roadMark", junction.root[3][5][0][0][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][0][0][1].get("sOffset"))
        self.assertEqual("solid", junction.root[3][5][0][0][0][1].get("type"))
        self.assertEqual("standard", junction.root[3][5][0][0][0][1].get("weight"))
        self.assertEqual("standard", junction.root[3][5][0][0][0][1].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[3][5][0][0][0][1].get("width"))
        self.assertEqual("left", junction.root[3][5][0][1].tag)
        self.assertEqual("lane", junction.root[3][5][0][1][0].tag)
        self.assertEqual("1", junction.root[3][5][0][1][0].get("id"))
        self.assertEqual("driving", junction.root[3][5][0][1][0].get("type"))
        self.assertEqual("false", junction.root[3][5][0][1][0].get("level"))
        self.assertEqual("link", junction.root[3][5][0][1][0][0].tag)
        self.assertEqual("width", junction.root[3][5][0][1][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][1][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[3][5][0][1][0][1].get("a"))
        self.assertEqual("-1.5700924585071457e-17", junction.root[3][5][0][1][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][1][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][1][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[3][5][0][1][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][1][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[3][5][0][1][0][2].get("type"))
        self.assertEqual("standard", junction.root[3][5][0][1][0][2].get("weight"))
        self.assertEqual("standard", junction.root[3][5][0][1][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[3][5][0][1][0][2].get("width"))
        self.assertEqual("right", junction.root[3][5][0][2].tag)
        self.assertEqual("lane", junction.root[3][5][0][2][0].tag)
        self.assertEqual("-1", junction.root[3][5][0][2][0].get("id"))
        self.assertEqual("driving", junction.root[3][5][0][2][0].get("type"))
        self.assertEqual("false", junction.root[3][5][0][2][0].get("level"))
        self.assertEqual("link", junction.root[3][5][0][2][0][0].tag)
        self.assertEqual("width", junction.root[3][5][0][2][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][2][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[3][5][0][2][0][1].get("a"))
        self.assertEqual("-1.5700924585071457e-17", junction.root[3][5][0][2][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][2][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][2][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[3][5][0][2][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[3][5][0][2][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[3][5][0][2][0][2].get("type"))
        self.assertEqual("standard", junction.root[3][5][0][2][0][2].get("weight"))
        self.assertEqual("standard", junction.root[3][5][0][2][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[3][5][0][1][0][2].get("width"))
        self.assertEqual("objects", junction.root[3][6].tag)
        self.assertEqual("signals", junction.root[3][7].tag)

    def checkJunctionRoot4(self, junction):
        self.assertEqual("road", junction.root[4].tag)
        self.assertEqual("", junction.root[4].get("name"))
        self.assertEqual(str.format("{0:.16e}", 10), junction.root[4].get("length"))
        self.assertEqual("24", junction.root[4].get("id"))
        self.assertEqual("16", junction.root[4].get("junction"))
        self.assertEqual("link", junction.root[4][0].tag)
        self.assertEqual("type", junction.root[4][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][1].get("s"))
        self.assertEqual("town", junction.root[4][1].get("type"))
        self.assertEqual("planView", junction.root[4][2].tag)
        self.assertEqual("geometry", junction.root[4][2][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][2][0].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][0].get("x"))
        self.assertEqual("-3.5000000000000000e+00", junction.root[4][2][0].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][0].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[4][2][0].get("length"))
        self.assertEqual("geometry", junction.root[4][2][1].tag)
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][1].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][1].get("x"))
        self.assertEqual("-2.5000000000000000e+00", junction.root[4][2][1].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][1].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][1].get("length"))
        self.assertEqual("geometry", junction.root[4][2][2].tag)
        self.assertEqual(str.format("{0:.16e}", 2), junction.root[4][2][2].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][2].get("x"))
        self.assertEqual("-1.5000000000000000e+00", junction.root[4][2][2].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][2].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][2].get("length"))
        self.assertEqual("geometry", junction.root[4][2][3].tag)
        self.assertEqual(str.format("{0:.16e}", 3), junction.root[4][2][3].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][3].get("x"))
        self.assertEqual("-4.9999999999999978e-01", junction.root[4][2][3].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][3].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][3].get("length"))
        self.assertEqual("geometry", junction.root[4][2][4].tag)
        self.assertEqual(str.format("{0:.16e}", 4), junction.root[4][2][4].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][4].get("x"))
        self.assertEqual("5.0000000000000033e-01", junction.root[4][2][4].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][4].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][4].get("length"))
        self.assertEqual("geometry", junction.root[4][2][5].tag)
        self.assertEqual(str.format("{0:.16e}", 5), junction.root[4][2][5].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][5].get("x"))
        self.assertEqual("1.5000000000000000e+00", junction.root[4][2][5].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][5].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][5].get("length"))
        self.assertEqual("geometry", junction.root[4][2][6].tag)
        self.assertEqual(str.format("{0:.16e}", 6), junction.root[4][2][6].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][6].get("x"))
        self.assertEqual("2.4999999999999996e+00", junction.root[4][2][6].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][6].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][6].get("length"))
        self.assertEqual("geometry", junction.root[4][2][7].tag)
        self.assertEqual(str.format("{0:.16e}", 7), junction.root[4][2][7].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][7].get("x"))
        self.assertEqual("3.4999999999999991e+00", junction.root[4][2][7].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][7].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][7].get("length"))
        self.assertEqual("geometry", junction.root[4][2][8].tag)
        self.assertEqual(str.format("{0:.16e}", 8), junction.root[4][2][8].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][8].get("x"))
        self.assertEqual("4.4999999999999991e+00", junction.root[4][2][8].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][8].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][8].get("length"))
        self.assertEqual("geometry", junction.root[4][2][9].tag)
        self.assertEqual(str.format("{0:.16e}", 9), junction.root[4][2][9].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[4][2][9].get("x"))
        self.assertEqual("5.5000000000000000e+00", junction.root[4][2][9].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[4][2][9].get("hdg"))
        self.assertEqual(str.format("{0:.16e}", 1), junction.root[4][2][9].get("length"))
        self.assertEqual("elevationProfile", junction.root[4][3].tag)
        self.assertEqual("lateralProfile", junction.root[4][4].tag)
        self.assertEqual("lanes", junction.root[4][5].tag)
        self.assertEqual("laneSection", junction.root[4][5][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0].get("s"))
        self.assertEqual("center", junction.root[4][5][0][0].tag)
        self.assertEqual("lane", junction.root[4][5][0][0][0].tag)
        self.assertEqual("0", junction.root[4][5][0][0][0].get("id"))
        self.assertEqual("driving", junction.root[4][5][0][0][0].get("type"))
        self.assertEqual("false", junction.root[4][5][0][0][0].get("level"))
        self.assertEqual("link", junction.root[4][5][0][0][0][0].tag)
        self.assertEqual("roadMark", junction.root[4][5][0][0][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][0][0][1].get("sOffset"))
        self.assertEqual("solid", junction.root[4][5][0][0][0][1].get("type"))
        self.assertEqual("standard", junction.root[4][5][0][0][0][1].get("weight"))
        self.assertEqual("standard", junction.root[4][5][0][0][0][1].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[4][5][0][0][0][1].get("width"))
        self.assertEqual("left", junction.root[4][5][0][1].tag)
        self.assertEqual("lane", junction.root[4][5][0][1][0].tag)
        self.assertEqual("1", junction.root[4][5][0][1][0].get("id"))
        self.assertEqual("driving", junction.root[4][5][0][1][0].get("type"))
        self.assertEqual("false", junction.root[4][5][0][1][0].get("level"))
        self.assertEqual("link", junction.root[4][5][0][1][0][0].tag)
        self.assertEqual("successor", junction.root[4][5][0][1][0][0][0].tag)
        self.assertEqual('1', junction.root[4][5][0][1][0][0][0].get("id"))
        self.assertEqual("predecessor", junction.root[4][5][0][1][0][0][1].tag)
        self.assertEqual('-1', junction.root[4][5][0][1][0][0][1].get("id"))
        self.assertEqual("width", junction.root[4][5][0][1][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][1][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[4][5][0][1][0][1].get("a"))
        self.assertEqual("-3.1401849173675501e-17", junction.root[4][5][0][1][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][1][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][1][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[4][5][0][1][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][1][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[4][5][0][1][0][2].get("type"))
        self.assertEqual("standard", junction.root[4][5][0][1][0][2].get("weight"))
        self.assertEqual("standard", junction.root[4][5][0][1][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[4][5][0][1][0][2].get("width"))
        self.assertEqual("right", junction.root[4][5][0][2].tag)
        self.assertEqual("lane", junction.root[4][5][0][2][0].tag)
        self.assertEqual("-1", junction.root[4][5][0][2][0].get("id"))
        self.assertEqual("driving", junction.root[4][5][0][2][0].get("type"))
        self.assertEqual("false", junction.root[4][5][0][2][0].get("level"))
        self.assertEqual("link", junction.root[4][5][0][2][0][0].tag)
        self.assertEqual("successor", junction.root[4][5][0][2][0][0][0].tag)
        self.assertEqual('-1', junction.root[4][5][0][2][0][0][0].get("id"))
        self.assertEqual("predecessor", junction.root[4][5][0][2][0][0][1].tag)
        self.assertEqual('1', junction.root[4][5][0][2][0][0][1].get("id"))
        self.assertEqual("width", junction.root[4][5][0][2][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][2][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[4][5][0][2][0][1].get("a"))
        self.assertEqual("-3.1401849173675501e-17", junction.root[4][5][0][2][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][2][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][2][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[4][5][0][2][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[4][5][0][2][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[4][5][0][2][0][2].get("type"))
        self.assertEqual("standard", junction.root[4][5][0][2][0][2].get("weight"))
        self.assertEqual("standard", junction.root[4][5][0][2][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[4][5][0][1][0][2].get("width"))
        self.assertEqual("objects", junction.root[4][6].tag)
        self.assertEqual("signals", junction.root[4][7].tag)

    def checkJunctionRoot5(self, junction):
        self.assertEqual("road", junction.root[5].tag)
        self.assertEqual("", junction.root[5].get("name"))
        self.assertEqual("7.8371961908546544e+00", junction.root[5].get("length"))
        self.assertEqual("25", junction.root[5].get("id"))
        self.assertEqual("16", junction.root[5].get("junction"))
        self.assertEqual("link", junction.root[5][0].tag)
        self.assertEqual("successor", junction.root[5][0][0].tag)
        self.assertEqual("road", junction.root[5][0][0].get("elementType"))
        self.assertEqual("26", junction.root[5][0][0].get("elementId"))
        self.assertEqual("start", junction.root[5][0][0].get("contactPoint"))
        self.assertEqual("predecessor", junction.root[5][0][1].tag)
        self.assertEqual("road", junction.root[5][0][1].get("elementType"))
        self.assertEqual("21", junction.root[5][0][1].get("elementId"))
        self.assertEqual("end", junction.root[5][0][1].get("contactPoint"))
        self.assertEqual("type", junction.root[5][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][1].get("s"))
        self.assertEqual("town", junction.root[5][1].get("type"))
        self.assertEqual("planView", junction.root[5][2].tag)
        self.assertEqual("geometry", junction.root[5][2][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][2][0].get("s"))
        self.assertEqual("2.0000000000000000e+01", junction.root[5][2][0].get("x"))
        self.assertEqual("1.5000000000000000e+00", junction.root[5][2][0].get("y"))
        self.assertEqual("1.0409118667749875e-01", junction.root[5][2][0].get("hdg"))
        self.assertEqual("9.9818846834543962e-01", junction.root[5][2][0].get("length"))
        self.assertEqual("spiral", junction.root[5][2][0][0].tag)
        self.assertEqual("9.6661735391434467e-02", junction.root[5][2][0][0].get("curvStart"))
        self.assertEqual("1.4823246264093384e-01", junction.root[5][2][0][0].get("curvEnd"))
        self.assertEqual("geometry", junction.root[5][2][1].tag)
        self.assertEqual("9.9818846834543962e-01", junction.root[5][2][1].get("s"))
        self.assertEqual("2.0992785675628028e+01", junction.root[5][2][1].get("x"))
        self.assertEqual("1.6037150934320319e+00", junction.root[5][2][1].get("y"))
        self.assertEqual("2.9831251917929136e-01", junction.root[5][2][1].get("hdg"))
        self.assertEqual("9.9803689483890423e-01", junction.root[5][2][1].get("length"))
        self.assertEqual("spiral", junction.root[5][2][1][0].tag)
        self.assertEqual("1.4823246264093384e-01", junction.root[5][2][1][0].get("curvStart"))
        self.assertEqual("1.9999092761075199e-01", junction.root[5][2][1][0].get("curvEnd"))
        self.assertEqual("geometry", junction.root[5][2][2].tag)
        self.assertEqual("1.9962253631843438e+00", junction.root[5][2][2].get("s"))
        self.assertEqual("2.1946743086701943e+01", junction.root[5][2][2].get("x"))
        self.assertEqual("1.8970457964224201e+00", junction.root[5][2][2].get("y"))
        self.assertEqual("5.0108304111505519e-01", junction.root[5][2][2].get("hdg"))
        self.assertEqual("9.9797478185310817e-01", junction.root[5][2][2].get("length"))
        self.assertEqual("arc", junction.root[5][2][2][0].tag)
        self.assertEqual("1.9999092761075199e-01", junction.root[5][2][2][0].get("curvature"))
        self.assertEqual("geometry", junction.root[5][2][3].tag)
        self.assertEqual("2.9942001450374520e+00", junction.root[5][2][3].get("s"))
        self.assertEqual("2.2822029652913187e+01", junction.root[5][2][3].get("x"))
        self.assertEqual("2.3764486460435799e+00", junction.root[5][2][3].get("y"))
        self.assertEqual("7.0061437320409903e-01", junction.root[5][2][3].get("hdg"))
        self.assertEqual("9.9799767868016787e-01", junction.root[5][2][3].get("length"))
        self.assertEqual("arc", junction.root[5][2][3][0].tag)
        self.assertEqual("1.9990010068967926e-01", junction.root[5][2][3][0].get("curvature"))
        self.assertEqual("geometry", junction.root[5][2][4].tag)
        self.assertEqual("3.9921978237176199e+00", junction.root[5][2][4].get("s"))
        self.assertEqual("2.3584945238761392e+01", junction.root[5][2][4].get("x"))
        self.assertEqual("3.0198452387613948e+00", junction.root[5][2][4].get("y"))
        self.assertEqual("8.9811201246612837e-01", junction.root[5][2][4].get("hdg"))
        self.assertEqual("9.9802551825528640e-01", junction.root[5][2][4].get("length"))
        self.assertEqual("arc", junction.root[5][2][4][0].tag)
        self.assertEqual("1.9987458546868983e-01", junction.root[5][2][4][0].get("curvature"))
        self.assertEqual("geometry", junction.root[5][2][5].tag)
        self.assertEqual("4.9902233419729063e+00", junction.root[5][2][5].get("s"))
        self.assertEqual("2.4206802734301569e+01", junction.root[5][2][5].get("x"))
        self.assertEqual("3.8004528164399827e+00", junction.root[5][2][5].get("y"))
        self.assertEqual("1.1031016112701657e+00", junction.root[5][2][5].get("hdg"))
        self.assertEqual("9.9808136990329643e-01", junction.root[5][2][5].get("length"))
        self.assertEqual("spiral", junction.root[5][2][5][0].tag)
        self.assertEqual("2.0054671822491296e-01", junction.root[5][2][5][0].get("curvStart"))
        self.assertEqual("1.8461042715064427e-01", junction.root[5][2][5][0].get("curvEnd"))
        self.assertEqual("geometry", junction.root[5][2][6].tag)
        self.assertEqual("5.9883047118762027e+00", junction.root[5][2][6].get("s"))
        self.assertEqual("2.4656767524016992e+01", junction.root[5][2][6].get("x"))
        self.assertEqual("4.6913501780728453e+00", junction.root[5][2][6].get("y"))
        self.assertEqual("1.2970267268289768e+00", junction.root[5][2][6].get("hdg"))
        self.assertEqual("9.9811694524803141e-01", junction.root[5][2][6].get("length"))
        self.assertEqual("spiral", junction.root[5][2][6][0].tag)
        self.assertEqual("1.8461042715064427e-01", junction.root[5][2][6][0].get("curvStart"))
        self.assertEqual("1.5752693710870286e-01", junction.root[5][2][6][0].get("curvEnd"))
        self.assertEqual("geometry", junction.root[5][2][7].tag)
        self.assertEqual("6.9864216571242341e+00", junction.root[5][2][7].get("s"))
        self.assertEqual("2.4926620980220282e+01", junction.root[5][2][7].get("x"))
        self.assertEqual("5.6522958313573595e+00", junction.root[5][2][7].get("y"))
        self.assertEqual("1.4844393654723524e+00", junction.root[5][2][7].get("hdg"))
        self.assertEqual("8.5077453373042022e-01", junction.root[5][2][7].get("length"))
        self.assertEqual("spiral", junction.root[5][2][7][0].tag)
        self.assertEqual("1.5752693710870286e-01", junction.root[5][2][7][0].get("curvStart"))
        self.assertEqual("1.2846240204463380e-01", junction.root[5][2][7][0].get("curvEnd"))
        self.assertEqual("elevationProfile", junction.root[5][3].tag)
        self.assertEqual("lateralProfile", junction.root[5][4].tag)
        self.assertEqual("lanes", junction.root[5][5].tag)
        self.assertEqual("laneSection", junction.root[5][5][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0].get("s"))
        self.assertEqual("center", junction.root[5][5][0][0].tag)
        self.assertEqual("lane", junction.root[5][5][0][0][0].tag)
        self.assertEqual("0", junction.root[5][5][0][0][0].get("id"))
        self.assertEqual("driving", junction.root[5][5][0][0][0].get("type"))
        self.assertEqual("false", junction.root[5][5][0][0][0].get("level"))
        self.assertEqual("link", junction.root[5][5][0][0][0][0].tag)
        self.assertEqual("roadMark", junction.root[5][5][0][0][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][0][0][1].get("sOffset"))
        self.assertEqual("solid", junction.root[5][5][0][0][0][1].get("type"))
        self.assertEqual("standard", junction.root[5][5][0][0][0][1].get("weight"))
        self.assertEqual("standard", junction.root[5][5][0][0][0][1].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[5][5][0][0][0][1].get("width"))
        self.assertEqual("left", junction.root[5][5][0][1].tag)
        self.assertEqual("lane", junction.root[5][5][0][1][0].tag)
        self.assertEqual("1", junction.root[5][5][0][1][0].get("id"))
        self.assertEqual("driving", junction.root[5][5][0][1][0].get("type"))
        self.assertEqual("false", junction.root[5][5][0][1][0].get("level"))
        self.assertEqual("link", junction.root[5][5][0][1][0][0].tag)
        self.assertEqual("width", junction.root[5][5][0][1][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][1][0][1].get("sOffset"))
        self.assertEqual("3.0000000016666659e+00", junction.root[5][5][0][1][0][1].get("a"))
        self.assertEqual("-3.0324098647227403e-10", junction.root[5][5][0][1][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][1][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][1][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[5][5][0][1][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][1][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[5][5][0][1][0][2].get("type"))
        self.assertEqual("standard", junction.root[5][5][0][1][0][2].get("weight"))
        self.assertEqual("standard", junction.root[5][5][0][1][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[5][5][0][1][0][2].get("width"))
        self.assertEqual("right", junction.root[5][5][0][2].tag)
        self.assertEqual("lane", junction.root[5][5][0][2][0].tag)
        self.assertEqual("-1", junction.root[5][5][0][2][0].get("id"))
        self.assertEqual("driving", junction.root[5][5][0][2][0].get("type"))
        self.assertEqual("false", junction.root[5][5][0][2][0].get("level"))
        self.assertEqual("link", junction.root[5][5][0][2][0][0].tag)
        self.assertEqual("successor", junction.root[5][5][0][2][0][0][0].tag)
        self.assertEqual('-1', junction.root[5][5][0][2][0][0][0].get("id"))
        self.assertEqual("predecessor", junction.root[5][5][0][2][0][0][1].tag)
        self.assertEqual('-1', junction.root[5][5][0][2][0][0][1].get("id"))
        self.assertEqual("width", junction.root[5][5][0][2][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][2][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[5][5][0][2][0][1].get("a"))
        self.assertEqual("-3.0764580073237453e-17", junction.root[5][5][0][2][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][2][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][2][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[5][5][0][2][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[5][5][0][2][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[5][5][0][2][0][2].get("type"))
        self.assertEqual("standard", junction.root[5][5][0][2][0][2].get("weight"))
        self.assertEqual("standard", junction.root[5][5][0][2][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[5][5][0][1][0][2].get("width"))
        self.assertEqual("objects", junction.root[5][6].tag)
        self.assertEqual("signals", junction.root[5][7].tag)

    def checkJunctionRoot6(self, junction):
        self.assertEqual("road", junction.root[6].tag)
        self.assertEqual("", junction.root[6].get("name"))
        self.assertEqual("2.0000100000000000e+01", junction.root[6].get("length"))
        self.assertEqual("26", junction.root[6].get("id"))
        self.assertEqual("-1", junction.root[6].get("junction"))
        self.assertEqual("link", junction.root[6][0].tag)
        self.assertEqual("type", junction.root[6][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][1].get("s"))
        self.assertEqual("town", junction.root[6][1].get("type"))
        self.assertEqual("planView", junction.root[6][2].tag)
        self.assertEqual("geometry", junction.root[6][2][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][2][0].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][0].get("x"))
        self.assertEqual("6.4999000000000002e+00", junction.root[6][2][0].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][0].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][0].get("length"))
        self.assertEqual("geometry", junction.root[6][2][1].tag)
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][1].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][1].get("x"))
        self.assertEqual("7.4999000000000002e+00", junction.root[6][2][1].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][1].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][1].get("length"))
        self.assertEqual("geometry", junction.root[6][2][2].tag)
        self.assertEqual("2.0000000000000000e+00", junction.root[6][2][2].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][2].get("x"))
        self.assertEqual("8.4999000000000002e+00", junction.root[6][2][2].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][2].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][2].get("length"))
        self.assertEqual("geometry", junction.root[6][2][3].tag)
        self.assertEqual("3.0000000000000000e+00", junction.root[6][2][3].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][3].get("x"))
        self.assertEqual("9.4999000000000002e+00", junction.root[6][2][3].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][3].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][3].get("length"))
        self.assertEqual("geometry", junction.root[6][2][4].tag)
        self.assertEqual("4.0000000000000000e+00", junction.root[6][2][4].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][4].get("x"))
        self.assertEqual("1.0499900000000000e+01", junction.root[6][2][4].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][4].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][4].get("length"))
        self.assertEqual("geometry", junction.root[6][2][5].tag)
        self.assertEqual("5.0000000000000000e+00", junction.root[6][2][5].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][5].get("x"))
        self.assertEqual("1.1499900000000000e+01", junction.root[6][2][5].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][5].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][5].get("length"))
        self.assertEqual("geometry", junction.root[6][2][6].tag)
        self.assertEqual("6.0000000000000000e+00", junction.root[6][2][6].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][6].get("x"))
        self.assertEqual("1.2499900000000000e+01", junction.root[6][2][6].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][6].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][6].get("length"))
        self.assertEqual("geometry", junction.root[6][2][7].tag)
        self.assertEqual("7.0000000000000000e+00", junction.root[6][2][7].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][7].get("x"))
        self.assertEqual("1.3499900000000000e+01", junction.root[6][2][7].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][7].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][7].get("length"))
        self.assertEqual("geometry", junction.root[6][2][8].tag)
        self.assertEqual("8.0000000000000000e+00", junction.root[6][2][8].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][8].get("x"))
        self.assertEqual("1.4499900000000000e+01", junction.root[6][2][8].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][8].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][8].get("length"))
        self.assertEqual("geometry", junction.root[6][2][9].tag)
        self.assertEqual("9.0000000000000000e+00", junction.root[6][2][9].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][9].get("x"))
        self.assertEqual("1.5499900000000000e+01", junction.root[6][2][9].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][9].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][9].get("length"))
        self.assertEqual("geometry", junction.root[6][2][10].tag)
        self.assertEqual("1.0000000000000000e+01", junction.root[6][2][10].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][10].get("x"))
        self.assertEqual("1.6499900000000000e+01", junction.root[6][2][10].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][10].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][10].get("length"))
        self.assertEqual("geometry", junction.root[6][2][11].tag)
        self.assertEqual("1.1000000000000000e+01", junction.root[6][2][11].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][11].get("x"))
        self.assertEqual("1.7499900000000000e+01", junction.root[6][2][11].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][11].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][11].get("length"))
        self.assertEqual("geometry", junction.root[6][2][12].tag)
        self.assertEqual("1.2000000000000000e+01", junction.root[6][2][12].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][12].get("x"))
        self.assertEqual("1.8499900000000000e+01", junction.root[6][2][12].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][12].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][12].get("length"))
        self.assertEqual("geometry", junction.root[6][2][13].tag)
        self.assertEqual("1.3000000000000000e+01", junction.root[6][2][13].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][13].get("x"))
        self.assertEqual("1.9499900000000000e+01", junction.root[6][2][13].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][13].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][13].get("length"))
        self.assertEqual("geometry", junction.root[6][2][14].tag)
        self.assertEqual("1.4000000000000000e+01", junction.root[6][2][14].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][14].get("x"))
        self.assertEqual("2.0499900000000000e+01", junction.root[6][2][14].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][14].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][14].get("length"))
        self.assertEqual("geometry", junction.root[6][2][15].tag)
        self.assertEqual("1.5000000000000000e+01", junction.root[6][2][15].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][15].get("x"))
        self.assertEqual("2.1499900000000000e+01", junction.root[6][2][15].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][15].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][15].get("length"))
        self.assertEqual("geometry", junction.root[6][2][16].tag)
        self.assertEqual("1.6000000000000000e+01", junction.root[6][2][16].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][16].get("x"))
        self.assertEqual("2.2499900000000000e+01", junction.root[6][2][16].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][16].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][16].get("length"))
        self.assertEqual("geometry", junction.root[6][2][17].tag)
        self.assertEqual("1.7000000000000000e+01", junction.root[6][2][17].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][17].get("x"))
        self.assertEqual("2.3499900000000000e+01", junction.root[6][2][17].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][17].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][17].get("length"))
        self.assertEqual("geometry", junction.root[6][2][18].tag)
        self.assertEqual("1.8000000000000000e+01", junction.root[6][2][18].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][18].get("x"))
        self.assertEqual("2.4499900000000000e+01", junction.root[6][2][18].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][18].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][18].get("length"))
        self.assertEqual("geometry", junction.root[6][2][19].tag)
        self.assertEqual("1.9000000000000000e+01", junction.root[6][2][19].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][19].get("x"))
        self.assertEqual("2.5499900000000000e+01", junction.root[6][2][19].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][19].get("hdg"))
        self.assertEqual("1.0000000000000000e+00", junction.root[6][2][19].get("length"))
        self.assertEqual("geometry", junction.root[6][2][20].tag)
        self.assertEqual("2.0000000000000000e+01", junction.root[6][2][20].get("s"))
        self.assertEqual("2.5000000000000000e+01", junction.root[6][2][20].get("x"))
        self.assertEqual("2.6499900000000000e+01", junction.root[6][2][20].get("y"))
        self.assertEqual("1.5707963267948966e+00", junction.root[6][2][20].get("hdg"))
        self.assertEqual("9.9999999999766942e-05", junction.root[6][2][20].get("length"))
        self.assertEqual("elevationProfile", junction.root[6][3].tag)
        self.assertEqual("lateralProfile", junction.root[6][4].tag)
        self.assertEqual("lanes", junction.root[6][5].tag)
        self.assertEqual("laneSection", junction.root[6][5][0].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0].get("s"))
        self.assertEqual("center", junction.root[6][5][0][0].tag)
        self.assertEqual("lane", junction.root[6][5][0][0][0].tag)
        self.assertEqual("0", junction.root[6][5][0][0][0].get("id"))
        self.assertEqual("driving", junction.root[6][5][0][0][0].get("type"))
        self.assertEqual("false", junction.root[6][5][0][0][0].get("level"))
        self.assertEqual("link", junction.root[6][5][0][0][0][0].tag)
        self.assertEqual("roadMark", junction.root[6][5][0][0][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][0][0][1].get("sOffset"))
        self.assertEqual("solid", junction.root[6][5][0][0][0][1].get("type"))
        self.assertEqual("standard", junction.root[6][5][0][0][0][1].get("weight"))
        self.assertEqual("standard", junction.root[6][5][0][0][0][1].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[6][5][0][0][0][1].get("width"))
        self.assertEqual("left", junction.root[6][5][0][1].tag)
        self.assertEqual("lane", junction.root[6][5][0][1][0].tag)
        self.assertEqual("1", junction.root[6][5][0][1][0].get("id"))
        self.assertEqual("driving", junction.root[6][5][0][1][0].get("type"))
        self.assertEqual("false", junction.root[6][5][0][1][0].get("level"))
        self.assertEqual("link", junction.root[6][5][0][1][0][0].tag)
        self.assertEqual("width", junction.root[6][5][0][1][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][1][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[6][5][0][1][0][1].get("a"))
        self.assertEqual("8.3333120123118806e-11", junction.root[6][5][0][1][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][1][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][1][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[6][5][0][1][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][1][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[6][5][0][1][0][2].get("type"))
        self.assertEqual("standard", junction.root[6][5][0][1][0][2].get("weight"))
        self.assertEqual("standard", junction.root[6][5][0][1][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[6][5][0][1][0][2].get("width"))
        self.assertEqual("right", junction.root[6][5][0][2].tag)
        self.assertEqual("lane", junction.root[6][5][0][2][0].tag)
        self.assertEqual("-1", junction.root[6][5][0][2][0].get("id"))
        self.assertEqual("driving", junction.root[6][5][0][2][0].get("type"))
        self.assertEqual("false", junction.root[6][5][0][2][0].get("level"))
        self.assertEqual("link", junction.root[6][5][0][2][0][0].tag)
        self.assertEqual("width", junction.root[6][5][0][2][0][1].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][2][0][1].get("sOffset"))
        self.assertEqual("2.9999999999999996e+00", junction.root[6][5][0][2][0][1].get("a"))
        self.assertEqual("-1.5700846082607336e-17", junction.root[6][5][0][2][0][1].get("b"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][2][0][1].get("c"))
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][2][0][1].get("d"))
        self.assertEqual("roadMark", junction.root[6][5][0][2][0][2].tag)
        self.assertEqual(str.format("{0:.16e}", 0), junction.root[6][5][0][2][0][2].get("sOffset"))
        self.assertEqual("solid", junction.root[6][5][0][2][0][2].get("type"))
        self.assertEqual("standard", junction.root[6][5][0][2][0][2].get("weight"))
        self.assertEqual("standard", junction.root[6][5][0][2][0][2].get("color"))
        self.assertEqual(str.format("{0:.16e}", 0.13), junction.root[6][5][0][1][0][2].get("width"))
        self.assertEqual("objects", junction.root[6][6].tag)
        self.assertEqual("signals", junction.root[6][7].tag)

    def checkJunctionJunction(self, junction):
        self.assertEqual("connection", junction.junction[0].tag)
        self.assertEqual('1', junction.junction[0].get("id"))
        self.assertEqual("21", junction.junction[0].get("incomingRoad"))
        self.assertEqual("25", junction.junction[0].get("connectingRoad"))
        self.assertEqual("start", junction.junction[0].get("contactPoint"))
        self.assertEqual("laneLink", junction.junction[0][0].tag)
        self.assertEqual("-1", junction.junction[0][0].get("from"))
        self.assertEqual("-1", junction.junction[0][0].get("to"))
        self.assertEqual("connection", junction.junction[1].tag)
        self.assertEqual("2", junction.junction[1].get("id"))
        self.assertEqual("21", junction.junction[1].get("incomingRoad"))
        self.assertEqual("22", junction.junction[1].get("connectingRoad"))
        self.assertEqual("start", junction.junction[1].get("contactPoint"))
        self.assertEqual("laneLink", junction.junction[1][0].tag)
        self.assertEqual("-1", junction.junction[1][0].get("from"))
        self.assertEqual("1", junction.junction[1][0].get("to"))
        self.assertEqual("connection", junction.junction[2].tag)
        self.assertEqual("3", junction.junction[2].get("id"))
        self.assertEqual("26", junction.junction[2].get("incomingRoad"))
        self.assertEqual("24", junction.junction[2].get("connectingRoad"))
        self.assertEqual("start", junction.junction[2].get("contactPoint"))
        self.assertEqual("laneLink", junction.junction[2][0].tag)
        self.assertEqual("1", junction.junction[2][0].get("from"))
        self.assertEqual("1", junction.junction[2][0].get("to"))
        self.assertEqual("connection", junction.junction[3].tag)
        self.assertEqual("4", junction.junction[3].get("id"))
        self.assertEqual("26", junction.junction[3].get("incomingRoad"))
        self.assertEqual("25", junction.junction[3].get("connectingRoad"))
        self.assertEqual("start", junction.junction[3].get("contactPoint"))
        self.assertEqual("laneLink", junction.junction[3][0].tag)
        self.assertEqual("1", junction.junction[3][0].get("from"))
        self.assertEqual("1", junction.junction[3][0].get("to"))
        self.assertEqual("connection", junction.junction[4].tag)
        self.assertEqual("5", junction.junction[4].get("id"))
        self.assertEqual("23", junction.junction[4].get("incomingRoad"))
        self.assertEqual("24", junction.junction[4].get("connectingRoad"))
        self.assertEqual("start", junction.junction[4].get("contactPoint"))
        self.assertEqual("laneLink", junction.junction[4][0].tag)
        self.assertEqual("1", junction.junction[4][0].get("from"))
        self.assertEqual("-1", junction.junction[4][0].get("to"))
        self.assertEqual("connection", junction.junction[5].tag)
        self.assertEqual("6", junction.junction[5].get("id"))
        self.assertEqual("23", junction.junction[5].get("incomingRoad"))
        self.assertEqual("22", junction.junction[5].get("connectingRoad"))
        self.assertEqual("start", junction.junction[5].get("contactPoint"))
        self.assertEqual("laneLink", junction.junction[5][0].tag)
        self.assertEqual("1", junction.junction[5][0].get("from"))
        self.assertEqual("-1", junction.junction[5][0].get("to"))
